<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.AdministratorDao">
    <resultMap id="studentResultMap" type="entity.Student">
        <result column="sid" property="sid" />
        <result column="student_token" property="token" />
        <result column="student_name" property="name" />
        <result column="student_major" property="major" />
        <result column="student_college" property="college" />
        <result column="student_sex" property="sex" />
        <result column="student_passwd" property="passwd" />
        <result column="student_phone" property="phone" />
    </resultMap>

    <resultMap id="classroomResultMap" type="entity.Classroom">
        <result column="cid" property="cid" />
        <result column="address" property="address" />
        <result column="classroom_token" property="token" />
        <collection property="courseSchedule" resultMap="courseResultMap" />
    </resultMap>

    <resultMap id="courseResultMap" type="entity.Course">
        <result column="id" property="courseId" />
        <result column="course_name" property="name" />
        <result column="course_teacher" property="teacher" />
        <result column="course_site" property="site" />
        <result column="startSection" property="startSection" />
        <result column="endSection" property="endSection" />
        <collection property="date" ofType="string">
            <result column="course_date" />
        </collection>
        <collection property="students" resultMap="studentResultMap" />
    </resultMap>

    <insert id="addStudent">
        insert into scuee.student
            (sid, student_token, student_name, student_major, student_college, student_sex, student_passwd, student_phone)
        values
            (#{student.sid}, #{student.token}, #{student.name}, #{student.major}, #{student.college}, #{student.sex}, #{student.passwd}, #{student.phone});
    </insert>

    <insert id="addClassroom">
        insert into scuee.classroom
    </insert>

    <insert id="addCourse"></insert>

    <update id="changeStudent"></update>

    <update id="changeClassroom"></update>

    <update id="changeCourse"></update>

    <delete id="deleteStudent"></delete>

    <delete id="deleteClassroom"></delete>

    <delete id="deleteCourse"></delete>

    <select id="checkToken" resultType="java.lang.Integer">
        select exists(
            select * from scuee.administrator a where a.token = #{token}
                   );
    </select>

    <select id="queryStudent" resultMap="studentResultMap"></select>

    <select id="queryClassroom" resultMap="classroomResultMap"></select>

    <select id="queryCourse" resultMap="courseResultMap"></select>

</mapper>