<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.CourseScheduleDao">
    <resultMap id="studentResultMap" type="entity.Student">
        <result column="sid" property="sid" />
        <result column="student_name" property="name" />
        <result column="student_major" property="major" />
        <result column="student_college" property="college" />
        <result column="student_sex" property="sex" />
        <result column="student_passwd" property="passwd" />
        <result column="student_phone" property="phone" />
    </resultMap>

    <resultMap id="courseResultMap" type="entity.Course">
        <result column="id" property="courseId" />
        <result column="course_name" property="name" />
        <result column="course_teacher" property="teacher" />
        <result column="course_site" property="site" />
        <result column="start_section" property="startSection" />
        <result column="end_section" property="endSection" />
        <collection property="date" ofType="string">
            <result column="course_date" />
        </collection>
    </resultMap>

    <select id="selectCourseBySid" resultMap="courseResultMap">
        select scuee.course.*, scuee.classroom_courses.course_date
        from scuee.course
        inner join scuee.classroom_courses
        on classroom_courses.course_id = course.id
        inner join (select * from scuee.course_students where course_students.student_id = #{sid})cst
        on course.id = cst.course_id
    </select>
</mapper>